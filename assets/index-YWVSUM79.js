var p=Object.defineProperty;var g=(n,e,t)=>e in n?p(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var s=(n,e,t)=>(g(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=t(r);fetch(r.href,i)}})();class l{constructor(e,t,o){s(this,"name");s(this,"surname");s(this,"email");s(this,"img");s(this,"phone");s(this,"city");s(this,"country");this.name=e,this.surname=t,this.email=o}set name(e){this.name=e}set surname(e){this.surname=e}set email(e){this.email=e}set img(e){this.img=e}set phone(e){this.phone=e}set city(e){this.city=e}set country(e){this.country=e}get name(){return this.name}get surname(){return this.surname}get email(){return this.email}get img(){return this.img}get phone(){return this.phone}get city(){return this.city}get country(){return this.country}static createPerson(e){const t=new l(e.name.first,e.name.last,e.email);return t.img=e.picture.thumbnail,t.phone=e.phone,t.city=e.location.city,t.country=e.location.country,t}}class f{constructor(e){s(this,"hour");s(this,"minute");s(this,"second");this.hour=e.hour,this.minute=e.minute,this.second=e.second}getHourTime(){return`${this.hour}:${this.minute}:${this.second}`}}async function m(n=0){u(!1);try{const t=(await(await fetch("https://randomuser.me/api/?inc=name,email,phone,picture,location")).json()).results[0];return/^[A-Za-z]+$/.test(t.location.city)?l.createPerson(t):m()}catch{return n<5?m(n+1):null}}async function y(n){const e=`https://world-time-by-api-ninjas.p.rapidapi.com/v1/worldtime?city=${n}`,t={method:"GET",headers:{"X-RapidAPI-Key":"c4467b972cmshe6399c5a65fe868p1b7c00jsnf82a3a37fdbc","X-RapidAPI-Host":"world-time-by-api-ninjas.p.rapidapi.com"}};try{return await(await fetch(e,t)).json()}catch{return null}}async function h(n,e=null){let t;const o=document.createElement("img");e?(o.src=e.img,t=new f(await y(e.city))):o.src="user_nt_found.jpg",n.innerHTML="",n.appendChild(o);let r={};e?r={Name:`${e.name} ${e.surname}`,Mail:e.email,Phone:e.phone,Location:`${e.city}, ${e.country}`,"Current Time":t.getHourTime()}:r={Name:"name surname",Mail:"mail",Phone:"phone",Location:"city","Current Time":"time"};for(let i in r){const a=document.createElement("span"),d=document.createElement("strong");d.textContent=i,a.appendChild(d),a.appendChild(document.createTextNode(`: ${r[i]}`)),n.appendChild(a)}document.getElementsByClassName("generate-user-button")[0]&&u()}function u(n=!0){const e=document.getElementsByClassName("generate-user-button")[0];e.disabled=!n,n?e.innerHTML="GENERATE USER":e.innerHTML="LOADING USER..."}async function E(){const n=await m();n?h(c,n):(alert("No se ha podido generar un usuario"),document.getElementsByClassName("generate-user-button")[0],u())}const c=document.createElement("div");c.classList.add("card");document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementsByClassName("container")[0];n.appendChild(c);let e=document.createElement("img");e.src="user_nt_found.jpg",h(c);const t=document.createElement("button");t.classList.add("generate-user-button"),n.appendChild(t),t.addEventListener("click",E),u()});
