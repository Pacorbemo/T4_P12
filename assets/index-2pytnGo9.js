var p=Object.defineProperty;var f=(t,e,n)=>e in t?p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var a=(t,e,n)=>(f(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();class y{constructor(e,n,r){a(this,"name");a(this,"surname");a(this,"email");a(this,"img");a(this,"phone");a(this,"city");a(this,"country");this.name=e,this.surname=n,this.email=r}set name(e){this.name=e}set surname(e){this.surname=e}set email(e){this.email=e}set img(e){this.img=e}set phone(e){this.phone=e}set city(e){this.city=e}set country(e){this.country=e}get name(){return this.name}get surname(){return this.surname}get email(){return this.email}get img(){return this.img}get phone(){return this.phone}get city(){return this.city}get country(){return this.country}}class g{constructor(e){a(this,"hour");a(this,"minute");a(this,"second");this.hour=e.hour,this.minute=e.minute,this.second=e.second}getHourTime(){return`${this.hour}:${this.minute}:${this.second}`}}async function l(t=0){u(!1);try{const n=(await(await fetch("https://randomuser.me/api/?inc=name,email,phone,picture,location")).json()).results[0];if(!/^[A-Za-z]+$/.test(n.location.city))return l();const r=new y(n.name.first,n.name.last,n.email);return r.img=n.picture.thumbnail,r.phone=n.phone,r.city=n.location.city,r.country=n.location.country,r}catch{return t<5?l(t+1):null}}async function E(t){const e=`https://world-time-by-api-ninjas.p.rapidapi.com/v1/worldtime?city=${t}`,n={method:"GET",headers:{"X-RapidAPI-Key":"c4467b972cmshe6399c5a65fe868p1b7c00jsnf82a3a37fdbc","X-RapidAPI-Host":"world-time-by-api-ninjas.p.rapidapi.com"}};try{const r=await fetch(e,n);return r.ok?await r.json():null}catch{return null}}async function h(t,e=null){let n;const r=document.createElement("img");if(e){r.src=e.img;let o=await E(e.city);o&&(o=new g(o)),n={Name:`${e.name} ${e.surname}`,Mail:e.email,Phone:e.phone,Location:`${e.city}, ${e.country}`,"Current Time":o?o.getHourTime():"Error"}}else r.src="user_nt_found.jpg",n={Name:"name surname",Mail:"mail",Phone:"phone",Location:"city","Current Time":"time"};t.innerHTML="",t.appendChild(r);const i=document.createElement("span"),s=document.createElement("strong");for(const o in n){const m=i.cloneNode(),d=s.cloneNode();d.textContent=o,m.appendChild(d),m.appendChild(document.createTextNode(`: ${n[o]}`)),t.appendChild(m)}document.getElementsByClassName("generate-user-button")[0]&&u()}function u(t=!0){const e=document.getElementsByClassName("generate-user-button")[0];e.disabled=!t,t?e.innerHTML="GENERATE USER":e.innerHTML="LOADING USER..."}async function L(){const t=await l();t?h(c,t):(alert("No se ha podido generar un usuario"),u())}const c=document.createElement("div");c.classList.add("card");document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementsByClassName("container")[0];t.appendChild(c),h(c);const e=document.createElement("button");e.classList.add("generate-user-button"),e.addEventListener("click",L),t.appendChild(e),u()});
