var f=Object.defineProperty;var y=(t,e,n)=>e in t?f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var a=(t,e,n)=>(y(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();class d{constructor(e,n,s){a(this,"name");a(this,"surname");a(this,"email");a(this,"img");a(this,"phone");a(this,"city");a(this,"country");this.name=e,this.surname=n,this.email=s}set name(e){this.name=e}set surname(e){this.surname=e}set email(e){this.email=e}set img(e){this.img=e}set phone(e){this.phone=e}set city(e){this.city=e}set country(e){this.country=e}get name(){return this.name}get surname(){return this.surname}get email(){return this.email}get img(){return this.img}get phone(){return this.phone}get city(){return this.city}get country(){return this.country}static createPerson(e){const n=new d(e.name.first,e.name.last,e.email);return n.img=e.picture.thumbnail,n.phone=e.phone,n.city=e.location.city,n.country=e.location.country,n}}class g{constructor(e){a(this,"hour");a(this,"minute");a(this,"second");this.hour=e.hour,this.minute=e.minute,this.second=e.second}getHourTime(){return`${this.hour}:${this.minute}:${this.second}`}}async function l(t=0){u(!1);try{const n=(await(await fetch("https://randomuser.me/api/?inc=name,email,phone,picture,location")).json()).results[0];return/^[A-Za-z]+$/.test(n.location.city)?d.createPerson(n):l()}catch{return t<5?l(t+1):null}}async function E(t){const e=`https://world-time-by-api-ninjas.p.rapidapi.com/v1/worldtime?city=${t}`,n={method:"GET",headers:{"X-RapidAPI-Key":"c4467b972cmshe6399c5a65fe868p1b7c00jsnf82a3a37fdbc","X-RapidAPI-Host":"world-time-by-api-ninjas.p.rapidapi.com"}};try{const s=await fetch(e,n);return s.ok?await s.json():null}catch{return null}}async function p(t,e=null){let n;const s=document.createElement("img");if(e){s.src=e.img;let o=await E(e.city);o&&(o=new g(o)),n={Name:`${e.name} ${e.surname}`,Mail:e.email,Phone:e.phone,Location:`${e.city}, ${e.country}`,"Current Time":o?o.getHourTime():"Error"}}else s.src="user_nt_found.jpg",n={Name:"name surname",Mail:"mail",Phone:"phone",Location:"city","Current Time":"time"};t.innerHTML="",t.appendChild(s);const r=document.createElement("span"),i=document.createElement("strong");for(const o in n){const m=r.cloneNode(),h=i.cloneNode();h.textContent=o,m.appendChild(h),m.appendChild(document.createTextNode(`: ${n[o]}`)),t.appendChild(m)}document.getElementsByClassName("generate-user-button")[0]&&u()}function u(t=!0){const e=document.getElementsByClassName("generate-user-button")[0];e.disabled=!t,t?e.innerHTML="GENERATE USER":e.innerHTML="LOADING USER..."}async function L(){const t=await l();t?p(c,t):(alert("No se ha podido generar un usuario"),u())}const c=document.createElement("div");c.classList.add("card");document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementsByClassName("container")[0];t.appendChild(c),p(c);const e=document.createElement("button");e.classList.add("generate-user-button"),e.addEventListener("click",L),t.appendChild(e),u()});
